language: python
sudo: required
dist: trusty
before_install:
  - sudo add-apt-repository -y 'deb http://llvm.org/apt/trusty/ llvm-toolchain-trusty-3.8 main' || true
  - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add - || true
  - sudo apt-get update -y || true
  - sudo apt-get install -qq -y clang-3.8 zlib1g-dev libbz2-dev || true
matrix:
  include:
  - os: linux
    python: '2.7'
    compiler: clang-3.8
    install: export CXX="clang++-3.8"
script:
- if [ "${TRAVIS_PYTHON_VERSION}" == "2.7" ]; then pip install enum34; fi
- git clone https://github.com/numba/llvmlite.git --depth 1
- pushd llvmlite
- python setup.py install
- popd
- python setup.py sdist
- pip install dist/`ls dist | grep -i -E '\.(gz)$' | head -1`
- pushd /
- python -c "import numpy_sugar; numpy_sugar.test()"
- popd
notifications:
  email: false
# deploy:
#   provider: pypi
#   skip_upload_docs: true
#   user: dhorta
#   password:
#     secure: KCRgtpEGHYy7MDU+rWL9F1TroiMh+pdmNt5hFbIu/F0/6IdUlLosgJR35i5jCgsYtCCfwAvP5RrBc0yaCFeH8f85q0m5jMmfq6vzGqbtwtvNgD4QaWFnPhsmOW9kX+iD/6/W0LSLhg+j3DaszWYdf8hGv0R6ekgVh8E8MhjtwaMFbrsWrsXaio1MJf4VNOsUSZGm0SsJPiopHxPNMOy/sDm0+b17iRGv3cTYeGFIEnrBromhT57ahbsEFU2FGi0nyNlas4unjUBVis+7+bHdYbhPxTe6IqY44Cq/V+57n6PDh4SD+TYJ/F7N/MwW7Sf2464K731swkLc9pPYDasqwhqvXkXzwvazN+wIlkO1VUsQUAryjCFI+nVA8rz12T8/9EnRNOTDmuLga/E+34Dj8kCaCK0cEqqUnl5nRj3JcoUPa/8u9rZhizkwD6EPEmWFYH7KMwpnGN5O3RGc7+EpPKJF/IDFlgdmCXX023JF/AkvXIlBKlzqsRR8u1zilPBvbnd+XLLVuZohVOQ7We+2xIZGO/V/QY8YxfoeR21MF/nqUKTEWWED1VGtVnXba12WDeuWBwAAWWpYM46/B/aa9yM88Yo2HrSUnxSFdeGJHF8xmwsWUXEMlq5RxZqRUflWDG/smwDqXD3xACo/L5P/pI+IYU18eS50fUVyBTcuCks=
#   on:
#     distributions: sdist bdist_wheel
#     repo: glimix/numpy-sugar
